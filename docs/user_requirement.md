# 即時競標與限時搶購系統 - 使用者需求規格文件

## 專案概述

### 專案名稱

即時競標與限時搶購系統 (Real-time Bidding & Flash Sale System)

### 專案目標

建立一個能夠支援大型促銷活動（如雙11、黑色星期五）的電商競標系統，提供限量稀有商品的動態競標與限時秒殺功能，確保在高並發情況下的系統穩定性與資料一致性。

### 目標使用者

- **一般會員**：參與競標與搶購的消費者
- **平台管理員**：負責商品上架、活動設定與監控的管理人員
- **系統監控人員**：負責監控系統效能與穩定性的技術人員

### 繳交日期

- **12/10 Midnight**：上傳簡報與影片
- **12/11**：Term Projects Demo
- **12/12**：打包 (zipped) 所有程式碼及說明文件並上傳到 NTU cool

### 使用情境

在大型促銷期間，平台不定時推出限量稀有商品（如限量球鞋、顯示卡、演唱會門票等），採用「動態競標」與「限時秒殺」混合模式，讓數千名會員同時競爭有限的商品數量。

---

## 利害關係人分析

### 主要使用者：一般會員

**需求**：

- 能夠快速註冊與登入系統
- 即時查看商品資訊與競標狀態
- 快速出價並即時知道自己的排名
- 了解當前的競爭狀況（最高價、得標門檻）

### 次要使用者：平台管理員

**需求**：

- 能夠上架限量商品並設定活動參數
- 監控競標活動進行狀況
- 查看最終得標結果與訂單資訊
- 驗證系統沒有發生超賣情況

### 系統監控人員

**需求**：

- 監控系統負載與效能指標
- 確認系統擴展機制正常運作
- 追蹤並發請求處理情況

---

## 功能需求

### FR-001：會員註冊與登入

**描述**：使用者必須能夠註冊帳號並登入系統以參與競標活動。
**優先級**：高

**驗收標準**：

- [ ] 使用者可以使用電子郵件和密碼註冊新帳號
- [ ] 使用者可以使用註冊的帳號登入系統
- [ ] 系統能夠自動分配會員權重 (W) 給新註冊的會員
- [ ] 使用者登入後可以查看自己的會員權重

---

### FR-002：會員權重管理

**描述**：系統必須為每位會員維護一個權重值，代表會員的等級或歷史貢獻度。
**優先級**：高

**驗收標準**：

- [ ] 系統能夠為會員分配或調整權重值 W
- [ ] 會員權重可以是系統隨機分配或預設值
- [ ] 會員可以查看自己當前的權重值
- [ ] 權重值會影響競標積分的計算

---

### FR-003：商品上架與活動設定

**描述**：管理員必須能夠上架限量商品並設定完整的競標活動參數。
**優先級**：高

**驗收標準**：

- [ ] 管理員可以新增商品資訊（名稱、描述、圖片）
- [ ] 管理員可以設定商品庫存數量 K
- [ ] 管理員可以設定商品底價（最低出價限制）
- [ ] 管理員可以設定競標活動的開始與結束時間
- [ ] 管理員可以設定積分計算公式的權重參數 α、β、γ
- [ ] 系統會顯示活動設定的摘要供管理員確認

---

### FR-004：查看商品與活動資訊

**描述**：使用者必須能夠查看商品詳情與當前活動狀態。
**優先級**：高

**驗收標準**：

- [ ] 使用者可以瀏覽所有進行中的競標活動
- [ ] 系統顯示商品名稱、描述、圖片、底價
- [ ] 系統顯示商品剩餘庫存數量 K
- [ ] 系統顯示活動開始時間與剩餘時間
- [ ] 系統顯示當前最高出價金額
- [ ] 系統顯示最低得標門檻分數（第 K 名的分數）

---

### FR-005：出價功能

**描述**：使用者必須能夠對商品送出出價，系統會記錄出價金額與時間。
**優先級**：高

**驗收標準**：

- [ ] 使用者可以輸入出價金額 P
- [ ] 系統驗證出價金額不得低於底價
- [ ] 系統記錄使用者送出出價的時間戳記（計算反應時間 T）
- [ ] 系統根據公式 Score = α·P + β/(T+1) + γ·W 計算使用者的競標積分
- [ ] 系統即時更新使用者的排名
- [ ] 使用者收到出價成功的確認訊息

---

### FR-006：更新出價功能

**描述**：使用者可以在活動截止前無限次修改出價以提高排名。
**優先級**：高

**驗收標準**：

- [ ] 使用者可以在活動截止前多次更新出價
- [ ] 每次更新出價時，系統重新計算反應時間 T（以最新出價時間為準）
- [ ] 系統重新計算使用者的競標積分
- [ ] 系統即時更新使用者的排名
- [ ] 使用者可以看到自己的出價歷史記錄

---

### FR-007：即時排名看板

**描述**：系統必須提供即時更新的戰況看板，顯示當前競標排名與狀態。
**優先級**：高

**驗收標準**：

- [ ] 系統顯示前 K 名暫定得標者的排名
- [ ] 系統顯示每位暫定得標者的競標積分（可選擇是否顯示完整資訊）
- [ ] 系統顯示當前最高出價金額
- [ ] 系統顯示最低得標門檻分數（第 K 名的分數）
- [ ] 排名看板會接近即時更新（延遲不超過數秒）
- [ ] 在高並發情況下，看板資料不會顯示明顯過時的資訊
- [ ] 使用者可以看到自己當前的排名位置

---

### FR-008：庫存管理與防超賣

**描述**：系統必須確保最終成交的訂單數量絕對不超過設定的庫存數量。
**優先級**：高（關鍵需求）

**驗收標準**：

- [ ] 系統嚴格限制最多只有前 K 名使用者能暫定得標
- [ ] 活動結束後，系統只建立前 K 名的訂單
- [ ] 在任何並發情況下，最終訂單數量都不會超過 K
- [ ] 系統能夠正確處理同時出價的情況，避免競態條件
- [ ] 管理員可以查看最終訂單列表，驗證數量正確

---

### FR-009：活動結算與得標通知

**描述**：活動結束後，系統必須確定最終得標者並產生訂單。
**優先級**：高

**驗收標準**：

- [ ] 活動時間截止後，系統自動結算最終排名
- [ ] 系統為前 K 名使用者產生訂單
- [ ] 得標使用者收到得標通知
- [ ] 未得標使用者收到未得標通知
- [ ] 系統記錄所有使用者的最終排名與積分

---

### FR-010：管理員監控面板

**描述**：管理員需要能夠監控活動進行狀況與最終結果。
**優先級**：中

**驗收標準**：

- [ ] 管理員可以查看活動的即時參與人數
- [ ] 管理員可以查看當前出價次數統計
- [ ] 管理員可以查看活動結束後的最終得標名單
- [ ] 管理員可以驗證訂單數量等於或小於庫存數量 K
- [ ] 管理員可以查看活動期間的系統效能指標

---

## 非功能性需求

### NFR-001：高並發處理能力

**描述**：系統必須能夠處理大量同時並發的競標請求。
**優先級**：高

**驗收標準**：

- [ ] 系統能夠同時處理至少 1000 個並發使用者的競標請求
- [ ] 在高並發情況下，系統回應時間保持穩定
- [ ] 系統不會因為高並發而崩潰或無回應

**測試指標**：

- 並發使用者數：≥ 1000 concurrent users
- 測試場景：所有使用者同時對同一商品進行競標

---

### NFR-002：即時性要求

**描述**：排名看板與出價回應必須接近即時更新。
**優先級**：高

**驗收標準**：

- [ ] 使用者出價後，能在數秒內看到排名更新
- [ ] 排名看板的資料延遲不超過可接受範圍
- [ ] 在高並發下，不會顯示明顯過時的排名資訊

**測試指標**：

- 排名更新延遲：< 5 秒
- 出價回應時間：< 2 秒（95th percentile）

---

### NFR-003：資料一致性

**描述**：系統必須確保絕對的資料一致性，特別是庫存與訂單數量。
**優先級**：高（關鍵需求）

**驗收標準**：

- [ ] 任何情況下都不會發生超賣（訂單數 ≤ 庫存數 K）
- [ ] 排名計算必須準確無誤
- [ ] 使用者出價記錄完整且正確
- [ ] 並發更新時不會遺失資料

**測試指標**：

- 超賣容忍度：0%（絕對不允許）
- 資料完整性：100%

---

### NFR-004：系統可擴展性 (Scalability)

**描述**：系統必須能夠根據負載自動擴展運算資源。
**優先級**：高

**驗收標準**：

- [ ] 當 CPU 使用率上升時，系統能夠自動增加 Container 或 Instance 數量
- [ ] 擴展後，系統回應時間保持穩定
- [ ] 負載降低後，系統能夠縮減資源
- [ ] 擴展過程不會影響服務可用性

**測試指標**：

- 自動擴展觸發條件：CPU 使用率 > 70%
- 擴展後回應時間變化：< 20%
- 擴展時間：< 2 分鐘

---

### NFR-005：峰值負載模擬

**描述**：系統必須能夠處理接近截止時間的指數型請求成長。
**優先級**：高

**驗收標準**：

- [ ] 系統能夠模擬截止時間接近時，使用者更新出價頻率呈指數型成長
- [ ] 在峰值負載下，系統仍能正常運作
- [ ] 系統能夠正確處理最後一分鐘的大量請求

**測試指標**：

- 峰值請求倍數：最後 1 分鐘的請求量為平均值的 10 倍以上
- 峰值時段系統可用性：> 99%

---

### NFR-006：效能監控與可觀測性

**描述**：系統必須提供完整的效能監控指標。
**優先級**：中

**驗收標準**：

- [ ] 系統能夠記錄並顯示 CPU 使用率
- [ ] 系統能夠記錄並顯示記憶體使用率
- [ ] 系統能夠記錄並顯示回應時間分佈
- [ ] 系統能夠記錄並顯示請求數量統計
- [ ] 系統能夠記錄並顯示 Container/Instance 數量變化

---

### NFR-007：使用者介面

**描述**：系統介面必須清楚呈現所有關鍵資訊。
**優先級**：中

**驗收標準**：

- [ ] 介面能夠清楚顯示登入、註冊功能
- [ ] 介面能夠清楚顯示出價輸入與送出按鈕
- [ ] 介面能夠清楚顯示即時排名資訊
- [ ] 介面能夠清楚顯示活動剩餘時間
- [ ] 介面能夠清楚顯示使用者當前狀態（得標/未得標）

**備註**：介面美觀程度非評分重點，重點在於功能完整性與資訊清晰度。

---

### NFR-008：系統容錯能力 (Optional)

**描述**：系統應具備基本的容錯能力，能夠處理部分元件故障的情況。
**優先級**：低（加分項目）

**驗收標準**：

- [ ] 單一服務實例故障時，系統整體仍可運作
- [ ] 資料庫連接中斷後，系統能夠自動重新連接
- [ ] 服務重啟後，系統狀態能夠正確恢復
- [ ] 實作熔斷器 (Circuit Breaker) 機制防止級聯失敗

**備註**：此為可選的加分項目，非必要功能。

---

## 系統測試需求

### TR-001：壓力測試

**描述**：系統必須經過完整的壓力測試驗證。
**優先級**：高

**測試要求**：

- [ ] 設計並執行壓力測試程式
- [ ] 模擬至少 1000 個並發使用者
- [ ] 所有並發使用者同時對同一商品進行競標
- [ ] 記錄系統回應時間、成功率、錯誤率
- [ ] 驗證系統在壓力下的穩定性

---

### TR-002：一致性驗證測試

**描述**：必須驗證系統在高並發下的資料一致性。
**優先級**：高

**測試要求**：

- [ ] 在大量並發競標結束後，檢查資料庫訂單數量
- [ ] 驗證訂單數量絕對不超過庫存數量 K
- [ ] 驗證所有得標者都是排名前 K 名
- [ ] 驗證積分計算的正確性
- [ ] 提供測試報告證明沒有超賣

---

### TR-003：動態負載測試

**描述**：模擬真實場景中接近截止時間的負載變化。
**優先級**：高

**測試要求**：

- [ ] 設計測試腳本模擬出價頻率隨時間指數成長
- [ ] 記錄系統在不同負載階段的表現
- [ ] 驗證自動擴展機制是否正常觸發
- [ ] 記錄擴展前後的效能指標變化

---

## 系統展示需求

系統 Demo 影片或展示必須包含以下功能演示：

### DEMO-001：系統初始化與設定

**展示內容**：

- [ ] 系統啟動過程
- [ ] 管理員登入後台
- [ ] 上架限量商品
- [ ] 設定庫存數量 K、底價、活動時間
- [ ] 設定積分公式參數 α、β、γ

---

### DEMO-002：使用者競標流程

**展示內容**：

- [ ] 使用者註冊與登入
- [ ] 查看商品與活動資訊
- [ ] 送出第一次出價
- [ ] 查看即時排名變化
- [ ] 更新出價提高排名
- [ ] 觀察排名看板即時更新

---

### DEMO-003：高並發壓力測試

**展示內容**：

- [ ] 啟動壓力測試程式
- [ ] 展示至少 1000 個並發使用者同時競標
- [ ] 展示出價頻率隨時間指數成長
- [ ] 顯示系統處理大量請求的情況
- [ ] 展示排名看板在高並發下的更新狀況

---

### DEMO-004：系統擴展性展示

**展示內容**：

- [ ] 展示 CPU 使用率監控圖表
- [ ] 展示 CPU 使用率上升時的情況
- [ ] 展示 Container/Instance 數量的自動增加
- [ ] 展示擴展前後的回應時間比較
- [ ] 證明擴展後系統回應時間保持穩定

---

### DEMO-005：一致性驗證

**展示內容**：

- [ ] 活動結束後查看資料庫
- [ ] 展示最終訂單數量
- [ ] 展示庫存數量 K
- [ ] 證明訂單數量 ≤ 庫存數量 K（沒有超賣）
- [ ] 展示得標者名單與排名前 K 名一致

---

## 核心業務規則

### BR-001：競標積分計算公式

**公式**：Score = α·P + β/(T+1) + γ·W

**參數說明**：

- **P (Price)**：使用者出價金額（必須 ≥ 底價）
- **T (Time)**：商品開賣後到使用者送出請求的時間差（毫秒），越短越好
- **W (Weight)**：會員權重，代表等級或歷史貢獻度
- **α、β、γ**：權重參數，由管理員在活動設定時指定

**規則**：

- 分數越高，排名越前
- 相同分數時，以最早出價者優先

---

### BR-002：得標資格判定

**規則**：

- 庫存限量 K 個商品
- 只有積分排名前 K 位的使用者能「暫定得標」
- 活動時間內排名會動態變化
- 活動結束時的前 K 名為最終得標者

---

### BR-003：出價限制

**規則**：

- 出價金額必須高於或等於底價
- 使用者可以無限次更新出價
- 每次更新出價會重新計算反應時間 T（影響積分）
- 活動時間截止後不能再出價

---

### BR-004：庫存鎖定規則

**規則**：

- 系統必須確保同時只有前 K 名處於「暫定得標」狀態
- 當新的出價導致排名變化時，第 K+1 名以後的使用者自動失去暫定得標資格
- 活動結束時，只為前 K 名建立訂單
- 絕對不允許建立超過 K 筆的訂單

---

## 使用者故事 (User Stories)

### Epic 1：會員管理

#### US-1.1：會員註冊

**身為** 一般使用者
**我想要** 註冊成為平台會員
**以便** 參與競標活動

**驗收標準**：

- **當** 我填寫電子郵件和密碼並送出註冊表單 **則** 系統建立我的帳號
- **當** 註冊成功 **則** 系統自動分配會員權重 W 給我
- **當** 註冊成功 **則** 我可以使用帳號登入系統

**優先級**：高
**故事點數**：3

---

#### US-1.2：會員登入

**身為** 註冊會員
**我想要** 登入系統
**以便** 查看活動並參與競標

**驗收標準**：

- **當** 我輸入正確的帳號密碼 **則** 系統允許我登入
- **當** 我登入成功 **則** 系統顯示我的會員資訊（包含權重 W）
- **當** 我輸入錯誤的帳號密碼 **則** 系統顯示錯誤訊息

**優先級**：高
**故事點數**：2

---

### Epic 2：活動管理

#### US-2.1：商品上架

**身為** 平台管理員
**我想要** 上架限量商品
**以便** 開始一個新的競標活動

**驗收標準**：

- **當** 我填寫商品資訊（名稱、描述、圖片、庫存 K、底價）**則** 系統儲存商品
- **當** 我設定活動時間（開始、結束）**則** 系統記錄時間範圍
- **當** 我設定積分公式參數（α、β、γ）**則** 系統記錄參數
- **當** 所有資訊設定完成 **則** 系統顯示活動摘要供我確認

**優先級**：高
**故事點數**：5

---

#### US-2.2：查看活動設定

**身為** 平台管理員
**我想要** 查看已設定的活動資訊
**以便** 確認設定正確

**驗收標準**：

- **當** 我查看活動列表 **則** 系統顯示所有活動
- **當** 我點選特定活動 **則** 系統顯示該活動的所有設定參數
- **當** 活動進行中 **則** 系統顯示當前參與人數與出價次數

**優先級**：中
**故事點數**：3

---

### Epic 3：競標參與

#### US-3.1：查看商品與活動

**身為** 登入會員
**我想要** 查看進行中的競標活動
**以便** 決定是否參與

**驗收標準**：

- **當** 我進入活動頁面 **則** 系統顯示所有進行中的活動
- **當** 我點選特定商品 **則** 系統顯示商品詳情（名稱、圖片、底價、庫存、剩餘時間）
- **當** 活動進行中 **則** 系統顯示當前最高出價與最低得標門檻分數

**優先級**：高
**故事點數**：3

---

#### US-3.2：送出出價

**身為** 登入會員
**我想要** 對商品送出出價
**以便** 參與競標

**驗收標準**：

- **當** 我輸入出價金額並送出 **則** 系統驗證金額是否大於等於底價
- **當** 出價有效 **則** 系統記錄我的出價金額 P 和時間戳記
- **當** 出價成功 **則** 系統計算我的競標積分（Score = α·P + β/(T+1) + γ·W）
- **當** 積分計算完成 **則** 系統更新我的排名
- **當** 排名更新完成 **則** 系統顯示我當前的排名位置

**優先級**：高
**故事點數**：5

---

#### US-3.3：更新出價

**身為** 已出價會員
**我想要** 提高我的出價金額
**以便** 提升我的排名

**驗收標準**：

- **當** 我輸入新的出價金額並送出 **則** 系統更新我的出價記錄
- **當** 出價更新 **則** 系統重新計算我的反應時間 T（以新的時間戳記為準）
- **當** 反應時間更新 **則** 系統重新計算我的競標積分
- **當** 積分更新 **則** 系統更新我的排名
- **當** 我在活動時間內 **則** 系統允許我無限次更新出價

**優先級**：高
**故事點數**：5

---

#### US-3.4：查看出價歷史

**身為** 已出價會員
**我想要** 查看我的出價歷史
**以便** 了解我的競標過程

**驗收標準**：

- **當** 我查看出價歷史 **則** 系統顯示我所有的出價記錄
- **對於** 每筆出價 **驗證** 系統顯示出價金額、時間、當時的積分與排名

**優先級**：低
**故事點數**：2

---

### Epic 4：即時資訊

#### US-4.1：查看即時排名

**身為** 參與競標的會員
**我想要** 查看即時排名看板
**以便** 了解當前競爭狀況

**驗收標準**：

- **當** 我查看排名看板 **則** 系統顯示前 K 名暫定得標者
- **當** 排名看板顯示 **則** 每位得標者顯示其排名與積分
- **當** 有新的出價 **則** 排名看板在數秒內更新
- **當** 我在排名內 **則** 系統特別標示我的位置
- **當** 系統高並發 **則** 排名看板仍顯示接近即時的資訊（延遲 < 5 秒）

**優先級**：高
**故事點數**：8

---

#### US-4.2：查看競標統計

**身為** 參與競標的會員
**我想要** 查看活動統計資訊
**以便** 評估競爭激烈程度

**驗收標準**：

- **當** 我查看活動統計 **則** 系統顯示當前最高出價
- **當** 我查看活動統計 **則** 系統顯示最低得標門檻分數（第 K 名的分數）
- **當** 我查看活動統計 **則** 系統顯示活動剩餘時間
- **當** 我查看活動統計 **則** 系統顯示當前參與人數

**優先級**：中
**故事點數**：3

---

### Epic 5：活動結算

#### US-5.1：活動自動結算

**身為** 系統
**我想要** 在活動時間截止後自動結算
**以便** 確定最終得標者

**驗收標準**：

- **當** 活動時間截止 **則** 系統停止接受新的出價
- **當** 活動結束 **則** 系統計算最終排名
- **當** 最終排名確定 **則** 系統為前 K 名使用者建立訂單
- **當** 訂單建立完成 **則** 系統確保訂單數量絕對不超過 K
- **當** 結算完成 **則** 系統發送通知給所有參與者

**優先級**：高
**故事點數**：5

---

#### US-5.2：得標通知

**身為** 得標會員
**我想要** 收到得標通知
**以便** 知道我成功得標

**驗收標準**：

- **當** 我是前 K 名得標者 **則** 系統發送得標通知給我
- **當** 我收到通知 **則** 通知包含商品資訊、我的出價與排名
- **當** 我收到通知 **則** 系統顯示我的訂單資訊

**優先級**：中
**故事點數**：3

---

#### US-5.3：未得標通知

**身為** 未得標會員
**我想要** 收到未得標通知
**以便** 知道競標結果

**驗收標準**：

- **當** 我不是前 K 名得標者 **則** 系統發送未得標通知給我
- **當** 我收到通知 **則** 通知包含我的最終排名與積分
- **當** 我收到通知 **則** 通知顯示得標的門檻分數

**優先級**：低
**故事點數**：2

---

### Epic 6：管理監控

#### US-6.1：查看活動結果

**身為** 平台管理員
**我想要** 查看活動結束後的結果
**以便** 確認活動正常完成

**驗收標準**：

- **當** 活動結束 **則** 系統顯示最終得標名單
- **當** 我查看得標名單 **則** 系統顯示每位得標者的出價、積分與排名
- **當** 我查看訂單統計 **則** 系統顯示訂單數量
- **當** 我比對訂單與庫存 **則** 訂單數量 ≤ 庫存數量 K

**優先級**：高
**故事點數**：3

---

#### US-6.2：監控系統效能

**身為** 系統監控人員
**我想要** 監控系統效能指標
**以便** 確保系統穩定運作

**驗收標準**：

- **當** 活動進行中 **則** 系統顯示即時 CPU 使用率
- **當** 活動進行中 **則** 系統顯示即時記憶體使用率
- **當** 活動進行中 **則** 系統顯示請求數量統計
- **當** 活動進行中 **則** 系統顯示回應時間分佈
- **當** 活動進行中 **則** 系統顯示 Container/Instance 數量

**優先級**：中
**故事點數**：5

---

#### US-6.3：驗證資料一致性

**身為** 平台管理員
**我想要** 驗證沒有發生超賣
**以便** 確保系統正確性

**驗收標準**：

- **當** 活動結束 **則** 我可以查詢資料庫訂單數量
- **當** 我查詢庫存設定 **則** 系統顯示設定的庫存 K
- **當** 我比對訂單與庫存 **則** 系統提供驗證報告
- **驗證** 訂單數量絕對不超過 K（超賣容忍度 = 0%）

**優先級**：高
**故事點數**：3

---

## 限制與假設

### 限制條件

1. **庫存限制**：每個活動的商品庫存數量 K 為固定值，活動期間不可更改
2. **時間限制**：活動必須有明確的開始與結束時間，時間到即停止接受出價
3. **出價限制**：出價金額必須為正數且大於等於底價
4. **會員限制**：必須為登入會員才能參與競標

### 系統假設

1. **網路環境**：假設使用者網路環境正常，能夠連接到系統
2. **時間同步**：假設系統時間與使用者時間同步
3. **會員誠信**：假設會員不會使用惡意程式攻擊系統
4. **管理員操作**：假設管理員了解系統運作，能正確設定活動參數

---

## 專案範圍

### 包含在範圍內

- 會員註冊、登入功能
- 商品上架與活動設定功能
- 競標出價與更新功能
- 即時排名看板
- 活動結算與訂單產生
- 防超賣機制
- 高並發處理能力
- 自動擴展機制
- 系統效能監控
- 壓力測試程式

### 不包含在範圍內

- 金流串接（實際付款功能）
- 物流配送功能
- 退貨退款機制
- 客服系統
- 會員積分兌換
- 商品評價功能
- 社群分享功能
- 行動 App 開發（僅需 Web 介面）
- 精美的 UI/UX 設計

---

## 成功標準

本專案被視為成功需達成以下標準：

### 功能完整性

- [ ] 所有核心功能（FR-001 至 FR-010）均已實作並通過測試
- [ ] 系統能夠完整執行從商品上架到活動結算的完整流程
- [ ] 會員能夠成功註冊、登入、出價並查看排名

### 效能達標

- [ ] 系統能夠處理至少 1000 個並發使用者
- [ ] 排名更新延遲小於 5 秒
- [ ] 出價回應時間的 95th percentile 小於 2 秒
- [ ] 系統在高並發下不會崩潰

### 一致性保證

- [ ] 經過壓力測試後，100% 沒有發生超賣（訂單數 ≤ 庫存數）
- [ ] 所有得標者都是排名前 K 名
- [ ] 積分計算完全正確
- [ ] 資料完整性達到 100%

### 可擴展性驗證

- [ ] CPU 使用率上升時，系統能夠自動增加資源
- [ ] 擴展後系統回應時間保持穩定（變化 < 20%）
- [ ] 擴展過程不影響服務可用性

### Demo 完整性

- [ ] Demo 影片或展示涵蓋 DEMO-001 至 DEMO-005 所有項目
- [ ] 清楚展示系統在高並發下的表現
- [ ] 明確證明沒有超賣情況發生

---

## 風險評估

### 高風險項目

#### RISK-001：超賣風險

**描述**：在高並發情況下，可能發生訂單數量超過庫存的情況
**影響**：高
**機率**：中
**緩解策略**：

- 使用資料庫層級的交易鎖定機制
- 實作樂觀鎖或悲觀鎖策略
- 完整的並發測試驗證
- 活動結束後的資料驗證機制

#### RISK-002：系統效能瓶頸

**描述**：高並發情況下系統回應時間過長或崩潰
**影響**：高
**機率**：中
**緩解策略**：

- 設計分散式架構
- 使用快取機制減輕資料庫負載
- 實作自動擴展機制
- 完整的壓力測試與調優

#### RISK-003：排名計算延遲

**描述**：在高並發下，排名看板更新延遲過大
**影響**：中
**機率**：高
**緩解策略**：

- 使用快取層儲存排名資料
- 非同步更新機制
- 批次處理排名計算
- 設定合理的更新頻率

### 中風險項目

#### RISK-004：時間同步問題

**描述**：不同伺服器的時間不同步，導致反應時間 T 計算錯誤
**影響**：中
**機率**：低
**緩解策略**：

- 使用 NTP 服務同步時間
- 在單一服務記錄時間戳記
- 定期檢查時間偏移

#### RISK-005：使用者體驗問題

**描述**：介面不夠清楚，使用者無法順利完成出價
**影響**：低
**機率**：低
**緩解策略**：

- 提供清楚的操作指引
- 即時的錯誤提示
- 簡化操作流程

---

## 附錄

### 名詞解釋

- **限量商品**：庫存數量有限的稀有商品，如限量球鞋、顯示卡、演唱會門票等
- **競標積分 (Score)**：系統根據出價金額、反應時間、會員權重計算出的綜合分數
- **反應時間 (T)**：從商品開賣到使用者送出出價的時間差，以毫秒為單位
- **會員權重 (W)**：代表會員等級或歷史貢獻度的數值
- **暫定得標**：活動期間排名在前 K 名的狀態，可能因其他使用者出價而改變
- **最終得標**：活動結束時排名在前 K 名，確定獲得商品的狀態
- **超賣 (Over-selling)**：訂單數量超過庫存數量的錯誤情況
- **並發 (Concurrent)**：多個使用者同時對系統發出請求
- **擴展 (Scaling)**：根據負載增加或減少系統運算資源

### 參考資料

- 積分計算公式：Score = α·P + β/(T+1) + γ·W
- 並發測試標準：至少 1000 concurrent users
- 一致性標準：超賣容忍度 = 0%
- 即時性標準：排名更新延遲 < 5 秒
- 效能標準：回應時間 95th percentile < 2 秒

---

## 文件版本

- **版本**：1.0
- **建立日期**：2025-12-03
- **最後更新**：2025-12-03
- **文件狀態**：最終版本
- **核准狀態**：待核准

---

## 結語

本需求規格文件完整定義了「即時競標與限時搶購系統」的使用者需求。系統的核心目標是在大型促銷活動期間，提供穩定、公平、即時的競標平台，同時確保在極高並發情況下的資料一致性與系統可用性。

所有功能需求、非功能需求、測試需求與展示需求都必須完整實現，特別是**絕對不允許發生超賣**的核心要求。系統必須經過嚴格的壓力測試驗證，並在 Demo 中清楚展示系統在高並發下的穩定表現與正確性。

本文件將作為後續系統設計、開發、測試與驗收的依據。
